# チュートリアル：Spack 101

講義とライブデモで構成されたSpackについて講義とライブデモを交え1日で紹介します。このチュートリアルは、2021年に開催されたバーチャルイベント Advanced Research Computing カンファレンス(PEARC'21)の最後に発表されました。

これらの資料を使用して、自分のサイトでSpackのコースを教えることができます。
もしくはスキップして、ライブデモスクリプトを読んで Spack が実際にどのように使用されているかを確認することもできます。

## スライド

- [Spackを使って複雑なHPCソフトウェア環境を管理しよう](../slides/spack_pearc21_tutorial_slides_jpn.pptx) PPTX形式

**引用元：** 2021年7月19日開催のバーチャルイベントAdvanced Research Computing (PEARC’21)における Practice & Experience「Managing HPC Software Complexity with Spack」（Gregory Becker、Robert Blake、Massimiliano Culpo、Tammy Dahlgren, Adam Stewart、そして Todd Gamblin） より。

## ライブデモ

基本的なSpackタスクを段階的に実行するスクリプトを提供します。
これらは上のスライドのセクションに対応しています。
次のいずれかの方法を使用して、スクリプトを実行できます。

1. ローカルマシンでチュートリアルを実行するために使用できる DockerHub 上の [spack/tutorialコンテナイメージ](https://hub.docker.com/r/spack/tutorial) を提供。 `docker run -it spack/tutorial` を実行してコンテナ利用することができる。
2. Dockerに慣れていないユーザがチュートリアルをホストしたい場合、 [AWS](https://aws.amazon.com/) でVMインスタンスもプロビジョニングし、VPMにログインするだけでデモ演習が可能。

これで、デモスクリプトを実行する準備が整いました：

1. [基本的なインストールチュートリアル](01_basic.md)
2. [環境チュートリアル](02_environment.md)
3. [構成チュートリアル](03_config.md)
4. パッケージ作成チュートリアル
5. 開発者ワークフローチュートリアル
6. ミラーチュートリアル
7. スタックチュートリアル
8. Spackを使ったスクリプティング

過去のチュートリアルの他のセクションも利用できます（最新の状態に保たれない場合があります）。

1. モジュールファイルチュートリアル
2. Spackパッケージビルドシステム
3. パッケージングの高度なトピック

目次：

## リンク

- [メインSpackドキュメント](https://spack.readthedocs.io/)

## チュートリアル

基本的なインストールチュートリアル
Spackのインストール
Spackには何が入っていますか？
パッケージのインストール
パッケージのアンインストール
高度な使用法spack find
コンパイラのカスタマイズ
環境チュートリアル
環境の基本
環境の作成とアクティブ化
パッケージのインストール
パッケージの使用
パッケージのアンインストール
一度に多くのスペックに対応
スペックの追加
仕様の構成
環境の再具体化
環境での構築
ビルドの再現
環境ファイル
管理された環境と独立した環境
管理された環境のレビュー
独立した環境の作成
インストールされた環境の更新
レビュー spack.lock
環境の再現
詳しくは
環境のセットアップと構築
環境の使用
環境の例を見つける
構成チュートリアル
構成スコープ
プラットフォーム固有のスコープ
YAML形式
コンパイラー構成
コンパイラフラグ
高度なコンパイラ構成
パッケージ設定の構成
バリアント設定
外部パッケージ
インストール権限
高レベルの構成
結論
パッケージ作成チュートリアル
Spackパッケージとは何ですか？
警告
入門
パッケージファイルの作成
パッケージドキュメントの追加
依存関係の追加
パッケージビルドのデバッグ
ビルドログの確認
手動で構築する
構成引数の指定
バリアントの追加
スペックオブジェクトのクエリ
スペックバージョンのクエリ
スペック名のクエリ
バリアントのクエリ
清掃
開発者ワークフローチュートリアル
ローカルソースからのインストール
開発反復サイクル
ワークフローの概要
ミラーチュートリアル
ソースキャッシュミラーの設定
バイナリキャッシュミラーの設定
キャッシュの概要
スタックチュートリアル
スペックマトリックス
spack環境での名前付きリスト
条件付き定義
記述子を表示
Spackを使用したスクリプト
チュートリアルの設定
とのスクリプティング spack find
spack find --format
spack find --json
コマンドの紹介spack python
Specオブジェクトへのアクセス
Spackデータベースのクエリ
スクリプトの使用
spack-python実行可能ファイルの使用
モジュールファイルチュートリアル
チュートリアルのセットアップ
モジュールツールを作成する
新しいコンパイラを追加する
チュートリアルで使用するソフトウェアをビルドします
モジュールファイルとは何ですか？
モジュールシステム
Spackはどのようにモジュールファイルを生成しますか？
モジュールvs spack load
非階層モジュールファイル
環境への不要な変更をフィルタリングする
一部のモジュールファイルが生成されないようにする
モジュールファイルの命名を変更する
カスタム環境の変更を追加する
依存関係を自動ロード
階層モジュールファイル
コア/コンパイラ/ MPI
LAPACKを階層に追加します
テンプレートの操作
モジュールファイルテンプレート
デフォルトのテンプレートを拡張する
今後のセクションの設定を復元する
Spackパッケージビルドシステム
パッケージクラス階層
パッケージ
Autotools
Makefile
CMake
PythonPackage
その他のビルドシステム
パッケージングの高度なトピック
チュートリアルのセットアップ
パッケージのビルド環境の変更
ビルド時に依存パッケージに環境変数を設定する
独自のパッケージに環境変数を設定する
図書館情報の取得
依存関係ライブラリへのアクセス
扶養家族への図書館の提供
その他のパッケージングトピック
他のパッケージに属性を添付する
追加のクエリパラメータ